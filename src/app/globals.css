@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   DESIGN SYSTEM - RARE CANVAS
   Single source of truth for all design tokens
   Supports light and dark themes

   Visual Direction: Warm, rich dark with color personality
   Inspired by Stripe, Framer, Raycast
   ======================================== */

/* Dark theme (default) */
:root,
[data-theme="dark"] {
  /* ===== COLORS ===== */

  /* Backgrounds - Warm dark with subtle purple undertone */
  --color-bg-base: #0c0a10;
  --color-bg-surface: #13111a;
  --color-bg-elevated: #1a1824;
  --color-bg-hover: #22202e;
  --color-bg-active: #2a2838;
  --color-bg-inverse: #f8f7fc;

  /* Text - Warmer grays with slight purple cast */
  --color-text-primary: #f0eef5;
  --color-text-secondary: #a8a4b8;
  --color-text-muted: #6e6a7c;
  --color-text-disabled: #4a4858;
  --color-text-on-brand: #FFFFFF;
  --color-text-inverse: #0c0a10;

  /* Borders - More visible with brand influence */
  --color-border-default: rgba(168, 164, 184, 0.12);
  --color-border-hover: rgba(168, 164, 184, 0.18);
  --color-border-active: rgba(168, 164, 184, 0.24);

  /* Semantic borders - for status indicators */
  --color-border-success: rgba(52, 211, 153, 0.25);
  --color-border-error: rgba(251, 113, 133, 0.25);
  --color-border-warning: rgba(251, 191, 36, 0.25);
  --color-border-info: rgba(147, 112, 219, 0.25);
  --color-border-brand: rgba(147, 112, 219, 0.25);

  /* Overlays - Slightly warmer with more presence */
  --color-overlay-subtle: rgba(168, 164, 184, 0.04);
  --color-overlay-default: rgba(168, 164, 184, 0.06);
  --color-overlay-hover: rgba(168, 164, 184, 0.09);
  --color-overlay-active: rgba(168, 164, 184, 0.12);
  --color-overlay-strong: rgba(168, 164, 184, 0.16);
  --color-overlay-heavy: rgba(168, 164, 184, 0.20);

  /* Backdrop for modals */
  --color-backdrop: rgba(12, 10, 16, 0.85);

  /* Shadows - Richer with subtle color */
  --shadow-sm: 0 2px 8px rgba(12, 10, 16, 0.25), 0 1px 2px rgba(12, 10, 16, 0.15);
  --shadow-md: 0 4px 20px rgba(12, 10, 16, 0.35), 0 2px 6px rgba(12, 10, 16, 0.2);
  --shadow-lg: 0 8px 40px rgba(12, 10, 16, 0.45), 0 4px 12px rgba(12, 10, 16, 0.25);
}

/* Light theme */
[data-theme="light"] {
  /* Backgrounds - Warm light with subtle cream undertone */
  --color-bg-base: #fdfcff;
  --color-bg-surface: #f8f7fc;
  --color-bg-elevated: #f2f0f7;
  --color-bg-hover: #ebe8f2;
  --color-bg-active: #e2dff0;
  --color-bg-inverse: #1a1824;

  /* Text - Rich dark with purple undertone */
  --color-text-primary: #1a1824;
  --color-text-secondary: #4a4858;
  --color-text-muted: #6e6a7c;
  --color-text-disabled: #a8a4b8;
  --color-text-on-brand: #FFFFFF;
  --color-text-inverse: #f8f7fc;

  /* Borders - Subtle with brand influence */
  --color-border-default: rgba(26, 24, 36, 0.08);
  --color-border-hover: rgba(26, 24, 36, 0.14);
  --color-border-active: rgba(26, 24, 36, 0.20);

  /* Semantic borders - for status indicators */
  --color-border-success: rgba(16, 185, 129, 0.30);
  --color-border-error: rgba(239, 68, 68, 0.30);
  --color-border-warning: rgba(245, 158, 11, 0.30);
  --color-border-info: rgba(123, 44, 191, 0.30);
  --color-border-brand: rgba(123, 44, 191, 0.30);

  /* Overlays - Warm purple-tinted */
  --color-overlay-subtle: rgba(26, 24, 36, 0.02);
  --color-overlay-default: rgba(26, 24, 36, 0.04);
  --color-overlay-hover: rgba(26, 24, 36, 0.06);
  --color-overlay-active: rgba(26, 24, 36, 0.08);
  --color-overlay-strong: rgba(26, 24, 36, 0.11);
  --color-overlay-heavy: rgba(26, 24, 36, 0.15);

  /* Backdrop for modals */
  --color-backdrop: rgba(26, 24, 36, 0.50);

  /* Shadows - Soft with subtle purple cast */
  --shadow-sm: 0 2px 8px rgba(26, 24, 36, 0.06), 0 1px 2px rgba(26, 24, 36, 0.04);
  --shadow-md: 0 4px 16px rgba(26, 24, 36, 0.08), 0 2px 6px rgba(26, 24, 36, 0.05);
  --shadow-lg: 0 8px 32px rgba(26, 24, 36, 0.10), 0 4px 12px rgba(26, 24, 36, 0.06);
}

/* Shared variables (same in both themes) */
:root {

  /* Brand - Rare Canvas Purple (refined) */
  --color-brand-primary: #8B5CF6;
  --color-brand-primary-rgb: 139 92 246;
  --color-brand-primary-hover: #7C3AED;
  --color-brand-primary-hover-rgb: 124 58 237;
  --color-brand-secondary: #A78BFA;
  --color-brand-secondary-rgb: 167 139 250;

  /* Accent Colors - For visual variety */
  --color-accent-cyan: #22D3EE;
  --color-accent-cyan-rgb: 34 211 238;
  --color-accent-pink: #F472B6;
  --color-accent-pink-rgb: 244 114 182;
  --color-accent-amber: #FBBF24;
  --color-accent-amber-rgb: 251 191 36;
  --color-accent-emerald: #34D399;
  --color-accent-emerald-rgb: 52 211 153;

  /* Glow colors - Softer, more refined */
  --color-glow-primary: rgba(139, 92, 246, 0.35);
  --color-glow-primary-strong: rgba(139, 92, 246, 0.55);
  --color-glow-success: rgba(52, 211, 153, 0.35);
  --color-glow-success-strong: rgba(52, 211, 153, 0.55);
  --color-glow-error: rgba(251, 113, 133, 0.35);
  --color-glow-error-strong: rgba(251, 113, 133, 0.55);

  /* Semantic - Modern, vibrant but not harsh */
  --color-success: #34D399;
  --color-success-rgb: 52 211 153;
  --color-success-muted: rgba(52, 211, 153, 0.12);
  --color-warning: #FBBF24;
  --color-warning-rgb: 251 191 36;
  --color-warning-muted: rgba(251, 191, 36, 0.12);
  --color-error: #FB7185;
  --color-error-rgb: 251 113 133;
  --color-error-muted: rgba(251, 113, 133, 0.12);
  --color-info: #8B5CF6;
  --color-info-rgb: 139 92 246;
  --color-info-muted: rgba(139, 92, 246, 0.12);
  --color-neutral: #9CA3AF;
  --color-neutral-rgb: 156 163 175;
  --color-neutral-muted: rgba(156, 163, 175, 0.12);
  
  /* ===== SPACING ===== */
  /* Using Tailwind defaults, no custom needed */
  
  /* ===== RADIUS ===== */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  
  /* ===== TRANSITIONS ===== */
  --transition-fast: 100ms ease;
  --transition-base: 150ms ease;
  --transition-slow: 250ms ease;
  
  /* Shadows are defined in theme sections above (dark/light) */
  
  /* ===== Z-INDEX ===== */
  --z-dropdown: 50;
  --z-modal: 100;
  --z-toast: 150;
  
  /* ===== LAYOUT ===== */
  --container-max-width: 1200px;
  --dashboard-max-width: 1400px;
  --bottom-nav-offset: 72px;
  --hero-min-height: 85vh;
}

/* ========================================
   BASE STYLES
   ======================================== */

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

html, body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  background: var(--color-bg-base);
  color: var(--color-text-primary);
  font-feature-settings: 'cv11', 'ss01';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing: -0.011em;
  line-height: 1.5;
}

::selection {
  background: rgba(139, 92, 246, 0.35);
}

/* Hide number input spinners */
input[type="number"] {
  -moz-appearance: textfield;
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* ========================================
   UTILITY CLASSES
   ======================================== */

/* Surface card - standard card styling */
.surface-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-default);
}

/* DEPRECATED: .glass is kept for backward compatibility only
   Use <Card> component or .surface-card class instead.
   The "glass" name is misleading as there is no blur effect. */
.glass {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-default);
}

.glass-hover,
.surface-card-hover {
  transition: background-color var(--transition-base);
}

.glass-hover:hover,
.surface-card-hover:hover {
  background: var(--color-bg-hover);
}

/* Transitions */
.tr-colors,
.tr-colors-micro,
.tr-colors-emphasis {
  transition: color var(--transition-base), 
              background-color var(--transition-base), 
              border-color var(--transition-base);
}

.tr-all,
.tr-all-micro,
.tr-all-emphasis {
  transition: all var(--transition-base);
}

.tr-opacity,
.tr-opacity-micro {
  transition: opacity var(--transition-base);
}

/* Glow classes - intentionally empty for Linear style */
.glow-primary-sm,
.glow-primary,
.glow-primary-lg,
.glow-success-sm,
.glow-success,
.glow-success-lg,
.glow-error-sm,
.glow-error,
.glow-error-lg,
.glow-secondary-sm,
.glow-secondary,
.glow-secondary-lg,
.glow-transition {
  /* No glow in Linear style */
}

/* ========================================
   SCROLLBAR
   ======================================== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-bg-active);
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-overlay-heavy);
}

/* Light mode scrollbar adjustments */
[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: #d4d4d4;
}

[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
  background: #a3a3a3;
}

/* Hide scrollbar utility */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* ========================================
   ANIMATIONS
   ======================================== */

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-fade-in { animation: fadeIn 150ms ease; }
.animate-slide-up { animation: slideUp 200ms ease; }
.animate-scale-in { animation: scaleIn 200ms ease; }
.animate-modal-entrance { animation: scaleIn 200ms ease; }
.animate-spin { animation: spin 1s linear infinite; }
.animate-pulse { animation: pulse 2s ease-in-out infinite; }
.animate-pulse-slow { animation: pulse 4s ease-in-out infinite; }

/* ========================================
   FOCUS STATES
   ======================================== */

*:focus-visible {
  outline: 2px solid var(--color-brand-primary);
  outline-offset: 2px;
}

/* ========================================
   TYPOGRAPHY UTILITIES
   ======================================== */

.text-balance {
  text-wrap: balance;
}

.badge-uppercase {
  text-transform: uppercase;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.05em;
}

/* Tabular figures for monospace numbers - prevents layout shift */
.font-mono {
  font-variant-numeric: tabular-nums;
}

/* Explicit tabular-nums utility */
.tabular-nums {
  font-variant-numeric: tabular-nums;
}

/* Stat numbers - used for prices, balances, counters */
.stat-number {
  font-family: var(--font-inter-mono), system-ui, sans-serif;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
}
